"use strict";var Group=require("../models/Group"),Mentor=require("../models/Mentor"),Period=require("../models/Period"),User=require("../models/User");exports.createGroup=function(r,t){var n,a,s,u,o,i,p,c,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.body,a=n.group_name,s=n.mentor1_id,u=n.mentor2_id,o=n.period_id,e.prev=1,e.next=4,regeneratorRuntime.awrap(Mentor.findByPk(s));case 4:return i=e.sent,e.next=7,regeneratorRuntime.awrap(Mentor.findByPk(u));case 7:return p=e.sent,e.next=10,regeneratorRuntime.awrap(Period.findByPk(o));case 10:if(c=e.sent,i&&p&&c){e.next=13;break}return e.abrupt("return",t.status(400).json({message:"Mentor atau periode tidak valid."}));case 13:return e.next=15,regeneratorRuntime.awrap(Group.create({group_name:a,mentor1_id:s,mentor2_id:u}));case 15:return d=e.sent,e.abrupt("return",t.status(201).json({message:"Group created successfully",group:d}));case 19:return e.prev=19,e.t0=e.catch(1),console.error("Error during group creation:",e.t0.message),e.abrupt("return",t.status(500).json({message:"Terjadi kesalahan saat membuat grup.",error:e.t0}));case 23:case"end":return e.stop()}},null,null,[[1,19]])},exports.addParticipantsToGroup=function(r,t){var n,a,s,u,o;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.body,a=n.group_id,s=n.user_ids,e.prev=1,e.next=4,regeneratorRuntime.awrap(Group.findByPk(a));case 4:if(u=e.sent){e.next=7;break}return e.abrupt("return",t.status(404).json({message:"Group tidak ditemukan."}));case 7:return e.next=9,regeneratorRuntime.awrap(User.findAll({where:{user_id:s,role:"peserta"}}));case 9:if(0===(o=e.sent).length)return e.abrupt("return",t.status(400).json({message:"Tidak ada pengguna yang valid untuk ditambahkan atau semua pengguna bukan peserta."}));e.next=12;break;case 12:return e.abrupt("return",t.status(200).json({message:"Pengguna berhasil ditambahkan ke grup.",group:u,participants:o}));case 15:return e.prev=15,e.t0=e.catch(1),console.error("Error during adding participants to group:",e.t0.message),e.abrupt("return",t.status(500).json({message:"Terjadi kesalahan saat menambahkan pengguna ke grup.",error:e.t0}));case 19:case"end":return e.stop()}},null,null,[[1,15]])},exports.getGroups=function(e,r){var t;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,regeneratorRuntime.awrap(Group.findAll({include:[{model:Mentor},{model:Period}]}));case 3:return t=e.sent,e.abrupt("return",r.status(200).json(t));case 7:return e.prev=7,e.t0=e.catch(0),console.error("Error fetching groups:",e.t0.message),e.abrupt("return",r.status(500).json({message:"Terjadi kesalahan saat mengambil grup.",error:e.t0}));case 11:case"end":return e.stop()}},null,null,[[0,7]])};
//# sourceMappingURL=groupController.min.js.map
